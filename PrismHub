-- üåü FULL PRISM HUB SCRIPT

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

-- =========================
-- üåü LOADING SCREEN
-- =========================

local LoadingGui = Instance.new("ScreenGui", game.CoreGui)
LoadingGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local LoadingFrame = Instance.new("Frame")
LoadingFrame.Size = UDim2.new(0, 300, 0, 120)
LoadingFrame.Position = UDim2.new(0.5, -150, 0.5, -60)
LoadingFrame.BackgroundColor3 = Color3.fromRGB(185, 255, 10)
LoadingFrame.Parent = LoadingGui
Instance.new("UICorner", LoadingFrame).CornerRadius = UDim.new(0, 12)

local LoadingText = Instance.new("TextLabel", LoadingFrame)
LoadingText.Size = UDim2.new(1, 0, 0.6, 0)
LoadingText.Position = UDim2.new(0, 0, 0, 0)
LoadingText.BackgroundTransparency = 1
LoadingText.Text = "üîÑ Loading"
LoadingText.TextColor3 = Color3.new(1, 1, 1)
LoadingText.Font = Enum.Font.SourceSansBold
LoadingText.TextSize = 20

local ProgressBarBG = Instance.new("Frame", LoadingFrame)
ProgressBarBG.Size = UDim2.new(0.9, 0, 0.15, 0)
ProgressBarBG.Position = UDim2.new(0.05, 0, 0.75, 0)
ProgressBarBG.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Instance.new("UICorner", ProgressBarBG).CornerRadius = UDim.new(0, 6)

local ProgressBar = Instance.new("Frame", ProgressBarBG)
ProgressBar.Size = UDim2.new(0, 0, 1, 0)
ProgressBar.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
Instance.new("UICorner", ProgressBar).CornerRadius = UDim.new(0, 6)

task.spawn(function()
    local dots = 0
    local duration = 3
    local steps = 30
    local interval = duration / steps
    for i = 1, steps do
        dots = (dots + 1) % 4
        LoadingText.Text = "üîÑ Loading" .. string.rep(".", dots)
        ProgressBar:TweenSize(UDim2.new(i / steps, 0, 1, 0),
            Enum.EasingDirection.Out, Enum.EasingStyle.Quad, interval, true)
        task.wait(interval)
    end
    LoadingGui:Destroy()
end)

task.wait(3)

-- =========================
-- üîê KEY SYSTEM & WHITELIST/PREMIUM
-- =========================

local KeyURL = "https://rekonise.com/key-system-hjq2n"
local CorrectKey = "PrismHubV1"

local Whitelist = {"JaidenBta5"}
local Blacklist = {}
local PremiumUsers = {"JustLivin12"}

-- Kick blacklisted users
for _, name in ipairs(Blacklist) do
    if LocalPlayer.Name == name then
        LocalPlayer:Kick("You are blacklisted from Prism Hub.")
        return
    end
end

-- Whitelist check
local function IsWhitelisted()
    if table.find(Whitelist, LocalPlayer.Name) then
        return true
    else
        LocalPlayer:Kick("You are not whitelisted to use Prism Hub.")
        return false
    end
end

-- Premium check
local function IsPremium()
    return table.find(PremiumUsers, LocalPlayer.Name) ~= nil
end

-- =========================
-- üåê SERVER HOP FUNCTION
-- =========================

local function serverHop()
    local PlaceId = game.PlaceId
    local AllServers = {}
    local Success, Response = pcall(function()
        return HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/"..PlaceId.."/servers/Public?sortOrder=Asc&limit=100"))
    end)

    if Success and Response and Response.data then
        for _, v in pairs(Response.data) do
            if v.playing < v.maxPlayers and v.id ~= game.JobId then
                table.insert(AllServers, v.id)
            end
        end
    end

    if #AllServers > 0 then
        local RandomServer = AllServers[math.random(1, #AllServers)]
        TeleportService:TeleportToPlaceInstance(PlaceId, RandomServer, LocalPlayer)
    else
        warn("No available servers found. Try again!")
    end
end

-- =========================
-- ‚úÖ LOAD MAIN UI FUNCTION
-- =========================

local function LoadMainUI()
  local mainScript = loadstring(game:HttpGet("https://raw.githubusercontent.com/BlueXhub/PrismHubV1/refs/heads/main/PrismHub"))()  
  if type(mainScript) == "function" then 
    mainScript() 
end
  
    local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
    local Window = Library.CreateLib("Prism Hub", "Synapse")

    -- Hub Tab
    local Tab = Window:NewTab("Hub")
    Tab:NewSection("Access Granted")

    -- Main Features Tab
    local MainTab = Window:NewTab("Main")
    local Section = MainTab:NewSection("Main Features")

    Section:NewSlider("WalkSpeed", "Change your Speed", 100, 16, function(value)
        local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local humanoid = character:FindFirstChildWhichIsA("Humanoid")
        if humanoid then humanoid.WalkSpeed = value end
    end)

    Section:NewSlider("JumpPower", "Change Jumppower", 100, 16, function(value)
        local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local humanoid = character:FindFirstChildWhichIsA("Humanoid")
        if humanoid then humanoid.JumpPower = value end
    end)

    -- Admin Section
    local AdminSection = MainTab:NewSection("Infinite Yield")
    AdminSection:NewButton("Infinite Yield", "Execute IY", function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source', true))()
    end)

    -- Fun Tab
    local FunTab = Window:NewTab("Fun")
    local FunSection = FunTab:NewSection("Fun Section")

    local GameTab = Window:NewTab("Games")
    local WestChicagoSection = GameTab:NewSection("West Chicago")
    WestChicagoSection:NewButton("West Chicago script", "Execute", function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/thesigmacorex/RobloxScripts/main/WestChicagoMAR10"))()
    end)

    local SouthBronxSection = GameTab:NewSection("South Bronx")
    -- Other Tab (Server Hop)
    local OtherTab = Window:NewTab("Other")
    local ServerHopSection = OtherTab:NewSection("Server Hop")
    ServerHopSection:NewButton("Server Hop", "Server hop to other servers", function()
        serverHop()
    end)

    -- Owner Info Tab
    local OwnerTab = Window:NewTab("üëë Owner")
    local OwnerSection = OwnerTab:NewSection("About the Creator")
    OwnerSection:NewLabel("Script by: JustLivin12")
    OwnerSection:NewLabel("Version: Prism Hub V1")
    OwnerSection:NewLabel("Created on: 05/2025")

    -- Updates Tab
    local UpdateTab = Window:NewTab("üì¢ Updates")
    local UpdateSection = UpdateTab:NewSection("Latest Changes")
    UpdateSection:NewLabel("‚úÖ 08/11/2025 - UI & KeySystem Improvements")
    UpdateSection:NewLabel("‚≠ê Premium Tab Enabled")
    UpdateSection:NewLabel("üöÄ WalkSpeed Slider Working")
    UpdateSection:NewLabel("8/31/2025 - Premium Feature + Serverhop")
    UpdateSection:NewLabel("5/11/2025 - New Jump Power Slider (Working)")
    UpdateSection:NewLabel("5/11/2025 - Added Admin Section")
    UpdateSection:NewLabel("5/14/2025 - New Tab! (FUN)")

    -- Premium Tab
    if IsPremium() then
        local PremiumTab = Window:NewTab("‚≠ê Premium")
        local PremiumSection = PremiumTab:NewSection("Welcome Premium User!")
        PremiumSection:NewButton("Unban VC", "Unbans your vc", function()
            game:GetService("VoiceChatService"):joinVoice()
        end)
    end
end

-- =========================
-- üîë SHOW KEY SYSTEM GUI
-- =========================

local function ShowKeySystem()
    local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(0, 320, 0, 300)
    Frame.Position = UDim2.new(0.5, -160, 0.5, -150)
    Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Frame.Active = true
    Frame.Draggable = true
    Frame.Parent = ScreenGui
    Instance.new("UICorner", Frame).CornerRadius = UDim.new(0,12)


	local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "üîê Prism Hub KeySystem!"
Title.Font = Enum.Font.SourceSansBold
Title.TextColor3 = Color3.new(1, 0, 0)
Title.TextSize = 19
Title.Parent = Frame  -- Make sure it‚Äôs parented to Frame



    local TextBox = Instance.new("TextBox", Frame)
    TextBox.Size = UDim2.new(0.8,0,0,30)
    TextBox.Position = UDim2.new(0.1,0,0.35,0)
    TextBox.PlaceholderText = "Enter Prism Key Here"
    TextBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
    TextBox.TextColor3 = Color3.new(1,1,1)
    TextBox.Font = Enum.Font.SourceSans
    TextBox.TextSize = 18
    TextBox.Text = ""

    local function Notify(msg, color)
        local Label = Instance.new("TextLabel", ScreenGui)
        Label.Size = UDim2.new(0,300,0,40)
        Label.Position = UDim2.new(0.5,-150,0.2,0)
        Label.BackgroundColor3 = color
        Label.BackgroundTransparency = 0.3
        Label.Text = msg
        Label.TextColor3 = Color3.new(1,1,1)
        Label.Font = Enum.Font.SourceSansBold
        Label.TextSize = 20
        task.delay(2,function() Label:Destroy() end)
    end

    local Submit = Instance.new("TextButton", Frame)
    Submit.Size = UDim2.new(0.5,0,0,30)
    Submit.Position = UDim2.new(0.25,0,0.6,0)
    Submit.Text = "Submit Key"
    Submit.BackgroundColor3 = Color3.fromRGB(0,170,0)
    Submit.TextColor3 = Color3.new(1,1,1)
    Submit.Font = Enum.Font.SourceSansBold
    Submit.TextSize = 18
    Instance.new("UICorner", Submit).CornerRadius = UDim.new(0,8)

    local function KeySubmit()
        if TextBox.Text == CorrectKey then
            Notify("‚úÖ Correct Key!", Color3.fromRGB(0,200,0))
            task.wait(0.5)
			            ScreenGui:Destroy()
            LoadMainUI()
        else
            Notify("‚ùå Incorrect Key", Color3.fromRGB(200,0,0))
        end
    end

    Submit.MouseButton1Click:Connect(KeySubmit)

    -- Auto-fill key for Premium users
    if IsPremium() then
        TextBox.Text = CorrectKey
        task.wait(0.5)
        KeySubmit()
    end

    -- Get Key Button
    local GetKey = Instance.new("TextButton", Frame)
    GetKey.Size = UDim2.new(0.5,0,0,25)
    GetKey.Position = UDim2.new(0.25,0,0.82,0)
    GetKey.Text = "Get Key"
    GetKey.BackgroundColor3 = Color3.fromRGB(0,120,255)
    GetKey.TextColor3 = Color3.new(1,1,1)
    GetKey.Font = Enum.Font.SourceSansBold
    GetKey.TextSize = 16
    Instance.new("UICorner", GetKey).CornerRadius = UDim.new(0,8)

    GetKey.MouseButton1Click:Connect(function()
        setclipboard(KeyURL)
        Notify("üîó Key copied to clipboard!", Color3.fromRGB(0,120,255))
    end)

    -- Exit Button
    local ExitButton = Instance.new("TextButton", Frame)
    ExitButton.Size = UDim2.new(0,25,0,25)
    ExitButton.Position = UDim2.new(1,-30,0,5)
    ExitButton.Text = "X"
    ExitButton.BackgroundColor3 = Color3.fromRGB(255,50,50)
    ExitButton.TextColor3 = Color3.new(1,1,1)
    ExitButton.Font = Enum.Font.SourceSansBold
    ExitButton.TextSize = 18
    Instance.new("UICorner", ExitButton).CornerRadius = UDim.new(1,0)

    ExitButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)
end

-- =========================
-- üöÄ FINAL LAUNCH
-- =========================

if IsPremium() then
    -- Premium users skip key system and load UI directly
    LoadMainUI()
elseif IsWhitelisted() then
    -- Whitelisted users still need to enter the key
    ShowKeySystem()
else
    -- Non-whitelisted, non-premium users also need key
    ShowKeySystem()
end
